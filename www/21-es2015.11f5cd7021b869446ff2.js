(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{swWB:function(l,n,u){"use strict";u.r(n);var o=u("8Y7J"),t=(u("gcOT"),u("lJxs"));class e{constructor(l,n){this.afAuth=l,this.afs=n,this.user=null,this.markers=[],this.isTracking=!1,this.anonLogin()}ionViewWillEnter(){this.loadMap()}loadMap(){let l={center:new google.maps.LatLng(51.9090902,7,6673267),zoom:5,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(this.mapElement.nativeElement,l)}anonLogin(){this.afAuth.auth.signInAnonymously().then(l=>{console.log(l),this.user=l}).then(()=>{this.findloc()})}findloc(){console.log("loc called"),this.locationsCollection=this.afs.collection("locations/cleaner1/track",l=>l.orderBy("timestamp","desc")),this.locations=this.locationsCollection.snapshotChanges().pipe(Object(t.a)(l=>l.map(l=>{const n=l.payload.doc.data();return Object.assign({id:l.payload.doc.id},n)}))),this.locations.subscribe(l=>{console.log("paused",l),setTimeout(()=>{console.log("update called"),this.markers.map(l=>l.setMap(null)),this.markers=[];let n=new google.maps.LatLng(l[0].lat,l[0].lng);this.map.setCenter(n),this.map.setZoom(14);let u=new google.maps.Marker({map:this.map,position:n});this.markers.push(u)},2e3)})}deleteLocation(l){this.locationsCollection.doc(l.id).delete()}}class i{}var a=u("pMnS"),s=u("oBZk"),b=u("ZZ/e"),c=u("SVse"),r=u("irV9"),p=u("Xr7G"),m=o.Ab({encapsulation:0,styles:[["#map[_ngcontent-%COMP%]{width:100%;height:300px}"]],data:{}});function d(l){return o.Wb(0,[(l()(),o.Cb(0,0,null,null,16,"ion-item-sliding",[],null,null,null,s.ab,s.u)),o.Bb(1,49152,null,0,b.O,[o.j,o.p,o.F],null,null),(l()(),o.Cb(2,0,null,0,8,"ion-item",[],null,null,null,s.bb,s.r)),o.Bb(3,49152,null,0,b.J,[o.j,o.p,o.F],null,null),(l()(),o.Cb(4,0,null,0,6,"ion-label",[["text-wrap",""]],null,null,null,s.cb,s.v)),o.Bb(5,49152,null,0,b.P,[o.j,o.p,o.F],null,null),o.Bb(6,16384,null,0,b.e,[o.p],null,null),(l()(),o.Ub(7,0,[" Lat: "," Lng: "," "])),(l()(),o.Cb(8,0,null,0,2,"p",[],null,null,null,null,null)),(l()(),o.Ub(9,null,[" "," "])),o.Qb(10,2),(l()(),o.Cb(11,0,null,0,5,"ion-item-options",[["side","start"]],null,null,null,s.Z,s.t)),o.Bb(12,49152,null,0,b.N,[o.j,o.p,o.F],{side:[0,"side"]},null),(l()(),o.Cb(13,0,null,0,3,"ion-item-option",[["color","danger"]],null,[[null,"click"]],(function(l,n,u){var o=!0;return"click"===n&&(o=!1!==l.component.deleteLocation(l.context.$implicit)&&o),o}),s.Y,s.s)),o.Bb(14,49152,null,0,b.M,[o.j,o.p,o.F],{color:[0,"color"]},null),(l()(),o.Cb(15,0,null,0,1,"ion-icon",[["name","trash"],["slot","icon-only"]],null,null,null,s.W,s.p)),o.Bb(16,49152,null,0,b.E,[o.j,o.p,o.F],{name:[0,"name"]},null)],(function(l,n){l(n,12,0,"start"),l(n,14,0,"danger"),l(n,16,0,"trash")}),(function(l,n){l(n,7,0,n.context.$implicit.lat,n.context.$implicit.lng);var u=o.Vb(n,9,0,l(n,10,0,o.Ob(n.parent.parent,0),n.context.$implicit.timestamp,"short"));l(n,9,0,u)}))}function g(l){return o.Wb(0,[(l()(),o.Cb(0,0,null,null,10,"div",[],null,null,null,null,null)),(l()(),o.Cb(1,0,null,null,4,"ion-item",[],null,null,null,s.bb,s.r)),o.Bb(2,49152,null,0,b.J,[o.j,o.p,o.F],null,null),(l()(),o.Cb(3,0,null,0,2,"ion-label",[],null,null,null,s.cb,s.v)),o.Bb(4,49152,null,0,b.P,[o.j,o.p,o.F],null,null),(l()(),o.Ub(5,0,["User ID: ",""])),(l()(),o.Cb(6,0,null,null,4,"ion-list",[],null,null,null,s.db,s.w)),o.Bb(7,49152,null,0,b.Q,[o.j,o.p,o.F],null,null),(l()(),o.rb(16777216,null,0,2,null,d)),o.Bb(9,278528,null,0,c.j,[o.X,o.S,o.x],{ngForOf:[0,"ngForOf"]},null),o.Pb(131072,c.b,[o.j])],(function(l,n){var u=n.component;l(n,9,0,o.Vb(n,9,0,o.Ob(n,10).transform(u.locations)))}),(function(l,n){l(n,5,0,n.component.user.uid)}))}function h(l){return o.Wb(0,[o.Pb(0,c.e,[o.z]),o.Sb(671088640,1,{mapElement:0}),(l()(),o.Cb(2,0,null,null,6,"ion-header",[],null,null,null,s.V,s.o)),o.Bb(3,49152,null,0,b.D,[o.j,o.p,o.F],null,null),(l()(),o.Cb(4,0,null,0,4,"ion-toolbar",[["color","primary"]],null,null,null,s.nb,s.G)),o.Bb(5,49152,null,0,b.Eb,[o.j,o.p,o.F],{color:[0,"color"]},null),(l()(),o.Cb(6,0,null,0,2,"ion-title",[],null,null,null,s.mb,s.F)),o.Bb(7,49152,null,0,b.Cb,[o.j,o.p,o.F],null,null),(l()(),o.Ub(-1,0,[" Live Tracking "])),(l()(),o.Cb(9,0,null,null,4,"ion-content",[],null,null,null,s.R,s.k)),o.Bb(10,49152,null,0,b.w,[o.j,o.p,o.F],null,null),(l()(),o.Cb(11,0,[[1,0],["map",1]],0,0,"div",[["id","map"]],[[8,"hidden",0]],null,null,null,null)),(l()(),o.rb(16777216,null,0,1,null,g)),o.Bb(13,16384,null,0,c.k,[o.X,o.S],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,5,0,"primary"),l(n,13,0,u.user)}),(function(l,n){l(n,11,0,!n.component.user)}))}function f(l){return o.Wb(0,[(l()(),o.Cb(0,0,null,null,1,"app-gps",[],null,null,null,h,m)),o.Bb(1,49152,null,0,e,[r.a,p.a],null,null)],null,null)}var C=o.yb("app-gps",e,f,{},{},[]),M=u("s7LF"),B=u("iInd");u.d(n,"GpsPageModuleNgFactory",(function(){return F}));var F=o.zb(i,[],(function(l){return o.Lb([o.Mb(512,o.m,o.kb,[[8,[a.a,C]],[3,o.m],o.D]),o.Mb(4608,c.m,c.l,[o.z,[2,c.s]]),o.Mb(4608,M.g,M.g,[]),o.Mb(4608,b.c,b.c,[o.F,o.g]),o.Mb(4608,b.Ib,b.Ib,[b.c,o.m,o.w]),o.Mb(4608,b.Nb,b.Nb,[b.c,o.m,o.w]),o.Mb(1073742336,c.c,c.c,[]),o.Mb(1073742336,M.f,M.f,[]),o.Mb(1073742336,M.a,M.a,[]),o.Mb(1073742336,b.Gb,b.Gb,[]),o.Mb(1073742336,B.o,B.o,[[2,B.t],[2,B.m]]),o.Mb(1073742336,i,i,[]),o.Mb(1024,B.k,(function(){return[[{path:"",component:e}]]}),[])])}))}}]);