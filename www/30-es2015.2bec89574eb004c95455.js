(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{gSbG:function(l,n,t){"use strict";t.r(n);var e=t("8Y7J"),o=t("mrSG"),i=t("N+bC"),s=t("ZZ/e");class r{constructor(l,n,t,e,o,i,s){this.regServ=l,this.http=n,this.alerCtrl=t,this.router=e,this.nav=o,this.storage=i,this.platform=s,this.otp="",this.flag=0,this.subscribe=this.platform.backButton.subscribeWithPriority(6666666,()=>{"DashPage"==this.constructor.name&&navigator.app.exitApp()}),this.storage.get("addr").then(l=>{console.log(l),this.address=l,this.regServ.setAddress(this.address)}),this.storage.get("cord").then(l=>{console.log(l),this.lat=l.lat,this.lng=l.lng,this.regServ.setLat(this.lat),this.regServ.setLng(this.lng)})}ngOnInit(){this.storage.get("activity").then(l=>{this.flag="registered"==l?0:1}),this.storage.get("email").then(l=>{this.flag="registered"==l?0:1})}goback(l){console.log(this.regServ.getEmail()),this.http.post("https://mywash.herokuapp.com/deltemp",{email:this.regServ.getEmail()}).subscribe(l=>{console.log(l)}),"l"==l&&this.router.navigate(["/login"],{replaceUrl:!0}),"r"==l&&this.router.navigate(["/register"],{replaceUrl:!0})}doAlert(l,n){return o.__awaiter(this,void 0,void 0,(function*(){const t=yield this.alerCtrl.create({header:"Error",message:l,buttons:[n]});yield t.present()}))}verify(){if(""==this.otp)this.doAlert("Enter Otp","Okay");else{const{otp:n}=this;this.regServ.setOtp(n);const t=this.regServ.getJson(),e={email:this.regServ.getEmail(),otp:this.otp};console.log(t);try{this.storage.get("activity").then(l=>{"registered"==l?(console.log(t),this.http.post("https://mywash.herokuapp.com/verifyregister",t).subscribe(l=>{console.log(l),1==l.message&&(this.storage.set("num",t.phone),this.router.navigate(["/addvehicle"],{replaceUrl:!0}))},l=>{console.log(l)})):"loggingin"==l&&(console.log(e),this.http.post("https://mywash.herokuapp.com/verifylogin",e).subscribe(l=>{console.log(l),1==l.message?(this.storage.set("activity","loggedin"),this.storage.set("address",l.message),this.storage.set("coords",{lat:l.lat,lng:l.lng}),this.router.navigate(["/tabs/tabs/dash"],{replaceUrl:!0})):(this.doAlert("Invalid Otp","Re-enter"),this.otp="")},l=>{console.log(l)}))})}catch(l){console.dir(l)}}}}class u{}var a=t("pMnS"),b=t("oBZk"),g=t("s7LF"),c=t("IheW"),h=t("iInd"),p=t("xgBC"),d=e.zb({encapsulation:0,styles:[["ion-icon[_ngcontent-%COMP%]{font-size:32px;margin-left:5%}"]],data:{}});function m(l){return e.Vb(0,[(l()(),e.Bb(0,0,null,null,10,"ion-header",[],null,null,null,b.W,b.o)),e.Ab(1,49152,null,0,s.D,[e.j,e.p,e.F],null,null),(l()(),e.Bb(2,0,null,0,8,"ion-toolbar",[],null,null,null,b.pb,b.H)),e.Ab(3,49152,null,0,s.Eb,[e.j,e.p,e.F],null,null),(l()(),e.Bb(4,0,null,0,1,"ion-icon",[["name","arrow-back-outline"],["size","3"],["slot","start"]],[[8,"hidden",0]],[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.goback("r")&&e),e}),b.X,b.p)),e.Ab(5,49152,null,0,s.E,[e.j,e.p,e.F],{name:[0,"name"],size:[1,"size"]},null),(l()(),e.Bb(6,0,null,0,1,"ion-icon",[["name","arrow-back-outline"],["size","3"],["slot","start"]],[[8,"hidden",0]],[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.goback("l")&&e),e}),b.X,b.p)),e.Ab(7,49152,null,0,s.E,[e.j,e.p,e.F],{name:[0,"name"],size:[1,"size"]},null),(l()(),e.Bb(8,0,null,0,2,"ion-title",[["align-title","center"]],null,null,null,b.ob,b.G)),e.Ab(9,49152,null,0,s.Cb,[e.j,e.p,e.F],null,null),(l()(),e.Tb(-1,0,["Verify OTP"])),(l()(),e.Bb(11,0,null,null,22,"ion-content",[],null,null,null,b.S,b.k)),e.Ab(12,49152,null,0,s.w,[e.j,e.p,e.F],null,null),(l()(),e.Bb(13,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),e.Bb(14,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),e.Bb(15,0,null,0,11,"ion-item",[],null,null,null,b.cb,b.r)),e.Ab(16,49152,null,0,s.J,[e.j,e.p,e.F],null,null),(l()(),e.Bb(17,0,null,0,2,"ion-label",[["center",""],["position","floating"]],null,null,null,b.db,b.v)),e.Ab(18,49152,null,0,s.P,[e.j,e.p,e.F],{position:[0,"position"]},null),(l()(),e.Tb(-1,0,[" CONFIRM OTP "])),(l()(),e.Bb(20,0,null,0,6,"ion-input",[["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,t){var o=!0,i=l.component;return"ionBlur"===n&&(o=!1!==e.Nb(l,21)._handleBlurEvent(t.target)&&o),"ionChange"===n&&(o=!1!==e.Nb(l,21)._handleIonChange(t.target)&&o),"ngModelChange"===n&&(o=!1!==(i.otp=t)&&o),o}),b.Y,b.q)),e.Ab(21,16384,null,0,s.Mb,[e.p],null,null),e.Qb(1024,null,g.e,(function(l){return[l]}),[s.Mb]),e.Ab(23,671744,null,0,g.h,[[8,null],[8,null],[8,null],[6,g.e]],{model:[0,"model"]},{update:"ngModelChange"}),e.Qb(2048,null,g.f,null,[g.h]),e.Ab(25,16384,null,0,g.g,[[4,g.f]],null,null),e.Ab(26,49152,null,0,s.I,[e.j,e.p,e.F],{type:[0,"type"]},null),(l()(),e.Bb(27,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),e.Bb(28,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),e.Bb(29,0,null,0,4,"ion-row",[],null,null,null,b.fb,b.x)),e.Ab(30,49152,null,0,s.lb,[e.j,e.p,e.F],null,null),(l()(),e.Bb(31,0,null,0,2,"ion-button",[["class","buttons"],["color","dark"],["expand","block"],["fill","solid"],["shape","round"],["size","large"],["style","margin-left: 35%;margin-right: 30%;"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.verify()&&e),e}),b.K,b.c)),e.Ab(32,49152,null,0,s.m,[e.j,e.p,e.F],{color:[0,"color"],expand:[1,"expand"],fill:[2,"fill"],shape:[3,"shape"],size:[4,"size"]},null),(l()(),e.Tb(-1,0,["VERIFY"]))],(function(l,n){var t=n.component;l(n,5,0,"arrow-back-outline","3"),l(n,7,0,"arrow-back-outline","3"),l(n,18,0,"floating"),l(n,23,0,t.otp),l(n,26,0,"number"),l(n,32,0,"dark","block","solid","round","large")}),(function(l,n){var t=n.component;l(n,4,0,t.flag),l(n,6,0,!t.flag),l(n,20,0,e.Nb(n,25).ngClassUntouched,e.Nb(n,25).ngClassTouched,e.Nb(n,25).ngClassPristine,e.Nb(n,25).ngClassDirty,e.Nb(n,25).ngClassValid,e.Nb(n,25).ngClassInvalid,e.Nb(n,25).ngClassPending)}))}function v(l){return e.Vb(0,[(l()(),e.Bb(0,0,null,null,1,"app-registernew",[],null,null,null,m,d)),e.Ab(1,114688,null,0,r,[i.a,c.c,s.b,h.m,s.Kb,p.b,s.Nb],null,null)],(function(l,n){l(n,1,0)}),null)}var f=e.xb("app-registernew",r,v,{},{},[]),k=t("SVse");t.d(n,"RegisternewPageModuleNgFactory",(function(){return y}));var y=e.yb(u,[],(function(l){return e.Kb([e.Lb(512,e.m,e.jb,[[8,[a.a,f]],[3,e.m],e.D]),e.Lb(4608,k.m,k.l,[e.z,[2,k.t]]),e.Lb(4608,g.k,g.k,[]),e.Lb(4608,s.c,s.c,[e.F,e.g]),e.Lb(4608,s.Jb,s.Jb,[s.c,e.m,e.w]),e.Lb(4608,s.Ob,s.Ob,[s.c,e.m,e.w]),e.Lb(1073742336,k.c,k.c,[]),e.Lb(1073742336,g.j,g.j,[]),e.Lb(1073742336,g.c,g.c,[]),e.Lb(1073742336,s.Gb,s.Gb,[]),e.Lb(1073742336,h.o,h.o,[[2,h.t],[2,h.m]]),e.Lb(1073742336,u,u,[]),e.Lb(1024,h.k,(function(){return[[{path:"",component:r}]]}),[])])}))}}]);